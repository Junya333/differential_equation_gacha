## 📄 要件定義書：「微分方程式ガチャ」

### ■ サイト概要

- **サイト名**：微分方程式ガチャ
- **説明**：出題範囲を選択して「ガチャ」を引くと、ランダムに微分方程式の問題が出され、一定時間後に解答を見ることができる学習支援Webアプリ。

---

### ■ 機能要件

#### 1. 問題出題

- 「出題する」ボタンを押すと、選択されたカテゴリからランダムに問題を表示
- 問題はLaTeX形式の数式で表示（MathJaxを使用）
- 問題IDごとに管理され、同一IDの解答が後で表示される

#### 2. 回答表示

- 「回答を見る」ボタンは、**出題から一定時間（10秒×問題数）経過後に有効化**
- 解答は一般解の数式、およびその問題に対応するカテゴリと参考リンクを表示
- 解答表示までの時間はlocalStorageで管理（ページリロードに耐性あり）

#### 3. 出題設定

- 出題範囲をチェックボックスで選択（初期は未定カテゴリあり）
- 出題数（1～10）を入力欄で指定
- 複数カテゴリが選ばれた場合、各カテゴリから**均等確率**で出題

#### 4. お気に入り

- 各問題に「★お気に入り」ボタンを設置
- localStorageにお気に入りIDを保存・保持

---

### ■ UI/UX要件

- PC/スマホに対応したレスポンシブデザイン（CSS Flex/Grid）
- 状態保持のためのlocalStorage使用（出題済み問題、時刻、お気に入り）
- ページリロード時も状態が維持される
- 出題済み問題は履歴として再表示可能（お気に入りとは別）

---

### ■ 技術要件

| 項目 | 内容 |
|------|------|
| フロント技術 | HTML / CSS / JavaScript（バニラJS） |
| 数式描画 | MathJax CDNを利用 |
| データ管理 | 問題データは JSON 形式でサーバー内に保存 |
| 状態保存 | `localStorage` |
| サーバー要件 | 静的ホスティング（GitHub Pages等で運用可能） |

---

### ■ データ構成案（問題データJSON）

```json
{
  "一次線形微分方程式": [
    {
      "id": "ode001",
      "question": "\\frac{dy}{dx} + 2y = e^x",
      "answer": "y = Ce^{-2x} + \\frac{1}{3}e^x"
    },
    {
      "id": "ode002",
      "question": "\\frac{dy}{dx} - 3y = 0",
      "answer": "y = Ce^{3x}"
    }
  ],
  "二次線形微分方程式": [
    {
      "id": "ode101",
      "question": "\\frac{d^2y}{dx^2} - 5\\frac{dy}{dx} + 6y = 0",
      "answer": "y = C_1 e^{2x} + C_2 e^{3x}"
    }
  ],
  "変数分離型微分方程式": [
    {
      "id": "ode201",
      "question": "\\frac{dy}{dx} = y \\sin x",
      "answer": "y = Ce^{-\\cos x}"
    }
  ]
}
```
